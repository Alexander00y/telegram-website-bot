import os
from aiogram import Bot, Dispatcher, types
from github import Github

bot = Bot(token="–í–ê–®_TELEGRAM_–¢–û–ö–ï–ù")  # –ü–æ–ª—É—á–µ–Ω –æ—Ç @BotFather
dp = Dispatcher(bot)

@dp.message_handler(content_types=types.ContentType.DOCUMENT)
async def handle_zip(message: types.Message):
    # –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª
    file = await bot.get_file(message.document.file_id)
    await file.download("website.zip")
    
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –≤ GitHub
    g = Github("–í–ê–®_GITHUB_–¢–û–ö–ï–ù")  # –¢–æ—Ç, —á—Ç–æ —Å–æ–∑–¥–∞–ª–∏ –≤ —à–∞–≥–µ 2
    repo = g.get_repo("–í–ê–®_–õ–û–ì–ò–ù/telegram-website-bot")  # –ù–∞–ø—Ä–∏–º–µ—Ä, "IvanovIvan/telegram-website-bot"
    
    # –ó–∞–≥—Ä—É–∂–∞–µ–º ZIP –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
    with open("website.zip", "rb") as f:
        repo.create_file("site.zip", "–î–æ–±–∞–≤–ª–µ–Ω —Å–∞–π—Ç", f.read())
    
    await message.reply("üåê –°–∞–π—Ç –∑–∞–≥—Ä—É–∂–µ–Ω! –°—Å—ã–ª–∫–∞ –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã.")

if __name__ == '__main__':
    from aiogram import executor
    executor.start_polling(dp)
